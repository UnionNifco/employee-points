<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>UNC Employee Points</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --color-bg: #f3f4f6;
      --color-card: #ffffff;
      --color-primary: #003366;  /* UNC Corporate Navy */
      --color-primary-soft: #e5eff9;
      --color-accent: #00a399;   /* HR / Wellbeing Green */
      --color-text-main: #111827;
      --color-text-sub: #6b7280;
      --color-border: #e5e7eb;
      --radius-lg: 16px;
      --radius-md: 10px;
      --shadow-soft: 0 10px 25px rgba(15, 23, 42, 0.08);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        Roboto, sans-serif;
      background: radial-gradient(circle at top left, #e0f2fe 0, #f9fafb 45%, #eef2ff 100%);
      color: var(--color-text-main);
    }

    .app-shell {
      max-width: 960px;
      margin: 0 auto;
      padding: 16px;
    }

    header.app-header {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px 18px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.94);
      box-shadow: var(--shadow-soft);
      backdrop-filter: blur(12px);
      margin-bottom: 18px;
    }

    .logo-circle {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      background: var(--color-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #ffffff;
      font-weight: 700;
      font-size: 18px;
    }

    .header-text h1 {
      font-size: 18px;
      margin: 0;
      display: flex;
      gap: 6px;
      align-items: baseline;
    }

    .header-text h1 span.badge {
      font-size: 11px;
      font-weight: 500;
      padding: 2px 8px;
      border-radius: 999px;
      background: var(--color-primary-soft);
      color: var(--color-primary);
    }

    .header-text p {
      margin: 2px 0 0;
      font-size: 12px;
      color: var(--color-text-sub);
    }

    .user-chip {
      margin-left: auto;
      padding: 6px 12px;
      border-radius: 999px;
      background: #f9fafb;
      font-size: 12px;
      display: flex;
      gap: 6px;
      align-items: center;
      color: var(--color-text-sub);
    }

    .user-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #22c55e;
    }

    /* Navigation tabs */
    nav.app-nav {
      margin-bottom: 16px;
    }

    .nav-tabs {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
    }

    .nav-btn {
      border-radius: 999px;
      border: 1px solid transparent;
      padding: 8px 4px;
      background: rgba(255, 255, 255, 0.9);
      font-size: 13px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
      color: var(--color-text-sub);
      transition: all 0.16s ease-out;
    }

    .nav-btn span.icon {
      font-size: 16px;
    }

    .nav-btn.active {
      background: var(--color-primary);
      color: #ffffff;
      border-color: var(--color-primary);
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.35);
      transform: translateY(-1px);
    }

    .nav-btn:hover:not(.active) {
      border-color: #cbd5f5;
      background: #ffffff;
    }

    /* Layout content */
    .views {
      display: grid;
      gap: 16px;
      margin-bottom: 32px;
    }

    .view {
      display: none;
    }

    .view.active {
      display: block;
    }

    .card {
      background: var(--color-card);
      border-radius: var(--radius-lg);
      padding: 16px 16px 14px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148, 163, 184, 0.15);
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .card-header h2 {
      margin: 0;
      font-size: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-header h2 span.icon {
      font-size: 18px;
    }

    .card-header .meta {
      font-size: 11px;
      color: var(--color-text-sub);
    }

    .card-body {
      font-size: 14px;
      color: var(--color-text-main);
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 8px;
      border-radius: 999px;
      background: #ecfeff;
      font-size: 11px;
      color: #0f766e;
    }

    .pill span.dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
    }

    /* Dashboard specific */
    .points-display {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .points-circle {
      width: 64px;
      height: 64px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #fef9c3 0, #facc15 35%, #f97316 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 20px;
      color: #1f2933;
      box-shadow: 0 14px 30px rgba(245, 158, 11, 0.5);
    }

    .points-text h3 {
      margin: 0;
      font-size: 14px;
      color: var(--color-text-sub);
    }

    .points-text p {
      margin: 2px 0 0;
      font-weight: 600;
      font-size: 18px;
    }

    .quick-actions {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
      margin-top: 12px;
    }

    .qa-btn {
      border-radius: var(--radius-md);
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      font-size: 13px;
      padding: 8px 10px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      gap: 2px;
      align-items: flex-start;
      transition: all 0.14s ease;
    }

    .qa-btn span.icon {
      font-size: 16px;
    }

    .qa-btn small {
      font-size: 11px;
      color: var(--color-text-sub);
    }

    .qa-btn:hover {
      background: #ffffff;
      border-color: #cbd5f5;
      box-shadow: 0 8px 18px rgba(148, 163, 184, 0.35);
      transform: translateY(-1px);
    }

    /* Form elements */
    .form-grid {
      display: grid;
      gap: 10px;
      margin-top: 8px;
    }

    label {
      display: block;
      font-size: 12px;
      font-weight: 500;
      color: var(--color-text-main);
      margin-bottom: 2px;
    }

    .field {
      font-size: 13px;
    }

    .field input,
    .field select,
    .field textarea {
      width: 100%;
      padding: 9px 10px;
      border-radius: var(--radius-md);
      border: 1px solid var(--color-border);
      font-size: 13px;
      outline: none;
      background: #f9fafb;
      transition: border-color 0.12s ease, background 0.12s ease, box-shadow 0.12s ease;
      font-family: inherit;
      resize: vertical;
      min-height: 40px;
    }

    .field textarea {
      min-height: 70px;
    }

    .field input:focus,
    .field select:focus,
    .field textarea:focus {
      border-color: var(--color-primary);
      background: #ffffff;
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.08);
    }

    .btn-primary {
      margin-top: 4px;
      border-radius: 999px;
      border: none;
      padding: 9px 14px;
      font-size: 13px;
      font-weight: 600;
      color: #ffffff;
      background: linear-gradient(135deg, var(--color-primary), #2563eb);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 8px 18px rgba(37, 99, 235, 0.45);
      transition: transform 0.12s ease, box-shadow 0.12s ease;
    }

    .btn-primary span.icon {
      font-size: 15px;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 26px rgba(37, 99, 235, 0.55);
    }

    .btn-secondary {
      margin-top: 4px;
      border-radius: 999px;
      padding: 8px 12px;
      border: 1px solid #d1d5db;
      font-size: 12px;
      background: #f9fafb;
      color: var(--color-text-sub);
      cursor: pointer;
    }

    .status-msg {
      margin-top: 6px;
      font-size: 12px;
    }

    .status-ok {
      color: #15803d;
    }

    .status-error {
      color: #b91c1c;
    }

    .muted {
      font-size: 12px;
      color: var(--color-text-sub);
    }

    .list {
      margin-top: 10px;
      padding-left: 16px;
      font-size: 12px;
      color: var(--color-text-sub);
    }

    .profile-box {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 12px;
    }

    .profile-row {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      margin-bottom: 4px;
    }

    .profile-label {
      color: var(--color-text-sub);
    }

    .profile-value {
      font-weight: 600;
    }

    @media (max-width: 640px) {
      header.app-header {
        border-radius: 16px;
      }
      .nav-tabs {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
      .profile-box {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <!-- HEADER -->
    <header class="app-header">
      <div class="logo-circle">
        U
      </div>
      <div class="header-text">
        <h1>
          UNC Employee Points
          <span class="badge">HR ¬∑ Engagement</span>
        </h1>
        <p>‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏ï‡πâ‡∏° ¬∑ ‡∏™‡πà‡∏á‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à ¬∑ ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° ‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô</p>
      </div>
      <div class="user-chip" id="userChip">
        <span class="user-dot"></span>
        <span id="userChipText">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</span>
      </div>
    </header>

    <!-- NAV -->
    <nav class="app-nav">
      <div class="nav-tabs">
        <button class="nav-btn active" data-view="dashboard">
          <span class="icon">üìä</span>
          Dashboard
        </button>
        <button class="nav-btn" data-view="activity">
          <span class="icon">üéØ</span>
          Activity
        </button>
        <button class="nav-btn" data-view="kudos">
          <span class="icon">üíö</span>
          Kudos
        </button>
        <button class="nav-btn" data-view="profile">
          <span class="icon">üë§</span>
          Profile
        </button>
      </div>
    </nav>

    <!-- VIEWS -->
    <main class="views">

      <!-- DASHBOARD VIEW -->
      <section class="view active" id="view-dashboard">
        <div class="card">
          <div class="card-header">
            <h2><span class="icon">üìä</span>‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏∞‡∏™‡∏°‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h2>
            <div class="meta">
              <span class="pill">
                <span class="dot"></span> Active
              </span>
            </div>
          </div>
          <div class="card-body">
            <div class="points-display">
              <div class="points-circle" id="pointsCircle">0</div>
              <div class="points-text">
                <h3>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏∞‡∏™‡∏°‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h3>
                <p><span id="pointsValue">0</span> ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
                <p class="muted" id="pointsUpdatedAt">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
              </div>
            </div>
            <div class="quick-actions">
              <button class="qa-btn" onclick="switchView('activity')">
                <span class="icon">üéØ</span>
                ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°
                <small>‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏∞‡∏™‡∏°</small>
              </button>
              <button class="qa-btn" onclick="switchView('kudos')">
                <span class="icon">üíö</span>
                ‡∏™‡πà‡∏á‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô
                <small>‡πÅ‡∏ä‡∏£‡πå‡πÇ‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏î‡∏µ ‡πÜ ‡πÉ‡∏ô‡∏ó‡∏µ‡∏°</small>
              </button>
              <button class="qa-btn" onclick="refreshDashboard()">
                <span class="icon">üîÑ</span>
                ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                <small>‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</small>
              </button>
              <button class="qa-btn" onclick="switchView('profile')">
                <span class="icon">üë§</span>
                ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
                <small>‡∏î‡∏π‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô/‡πÅ‡∏ú‡∏ô‡∏Å</small>
              </button>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h2><span class="icon">üìù</span>‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÅ‡∏≠‡∏õ‡∏ô‡∏µ‡πâ</h2>
          </div>
          <div class="card-body">
            <ul class="list">
              <li>‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏à‡∏≤‡∏Å‡πÄ‡∏°‡∏ô‡∏π <strong>Activity</strong> ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</li>
              <li>‡∏™‡πà‡∏á‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡πÄ‡∏°‡∏ô‡∏π <strong>Kudos</strong> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏û‡∏•‡∏±‡∏á‡∏ö‡∏ß‡∏Å (‡∏ó‡∏±‡πâ‡∏á‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πâ‡∏°)</li>
              <li>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏∞‡∏™‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏°‡∏ô‡∏π <strong>Profile</strong></li>
            </ul>
          </div>
        </div>
      </section>

      <!-- ACTIVITY VIEW -->
      <section class="view" id="view-activity">
        <div class="card">
          <div class="card-header">
            <h2><span class="icon">üéØ</span>‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</h2>
            <div class="meta">
              ‡πÉ‡∏ä‡πâ‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà HR / ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏à‡πâ‡∏á
            </div>
          </div>
          <div class="card-body">
            <div class="form-grid">
              <div class="field" id="field-emp-activity">
                <label>‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô (EmployeeID)</label>
                <input id="empCheckin" placeholder="‡πÄ‡∏ä‡πà‡∏ô U001" />
              </div>
              <div class="field">
                <label>‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° (ActivityID)</label>
                <input id="activityCheckin" placeholder="‡πÄ‡∏ä‡πà‡∏ô A2025-001" />
              </div>
              <button class="btn-primary" onclick="checkinActivity()">
                <span class="icon">‚úÖ</span>
                ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
              </button>
              <div id="checkinResult" class="status-msg"></div>
              <p class="muted">
                ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°: Happy Station, Kaizen Sharing, Sports Day ‡∏Ø‡∏•‡∏Ø<br />
                ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà HR ‡∏Å‡∏≥‡∏´‡∏ô‡∏î
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- KUDOS VIEW -->
      <section class="view" id="view-kudos">
        <div class="card">
          <div class="card-header">
            <h2><span class="icon">üíö</span>‡∏™‡πà‡∏á‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</h2>
            <div class="meta">
              ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏Å‡πÄ‡∏•‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡∏ó‡∏±‡∏ö‡πÉ‡∏à‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
            </div>
          </div>
          <div class="card-body">
            <div class="form-grid">
              <div class="field" id="field-emp-kudos">
                <label>‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á)</label>
                <input id="empFeedback" placeholder="‡πÄ‡∏ä‡πà‡∏ô U001" />
              </div>
              <div class="field">
                <label>‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô (‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö)</label>
                <input id="empTarget" placeholder="‡πÄ‡∏ä‡πà‡∏ô U002" />
              </div>
              <div class="field">
                <label>‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° (ActivityID) (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
                <input id="activityFeedback" placeholder="‡πÄ‡∏ä‡πà‡∏ô A2025-001 ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ß‡πâ‡∏ô‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏î‡πâ" />
              </div>
              <div class="field">
                <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à</label>
                <select id="fbCategory">
                  <option value="Heart">‚ù§Ô∏è Heart - ‡πÉ‡∏´‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à/‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì</option>
                  <option value="Like">üëç Like - ‡∏ä‡∏∑‡πà‡∏ô‡∏ä‡∏°‡∏ú‡∏•‡∏á‡∏≤‡∏ô/‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠</option>
                  <option value="Star">‚≠ê Star - ‡πÇ‡∏î‡∏î‡πÄ‡∏î‡πà‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©</option>
                </select>
              </div>
              <div class="field">
                <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏î‡∏≤‡∏ß / ‡πÅ‡∏ï‡πâ‡∏°‡∏û‡∏¥‡πÄ‡∏®‡∏© (‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô = 1)</label>
                <input id="fbStars" type="number" min="1" placeholder="1" />
              </div>
              <div class="field">
                <label>‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏∂‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</label>
                <textarea id="fbMessage" placeholder="‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏£‡∏∞‡∏ó‡∏±‡∏ö‡πÉ‡∏à‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ? ‡∏•‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡∏î‡∏π‡∏™‡∏¥ üòä"></textarea>
              </div>
              <button class="btn-primary" onclick="sendKudos()">
                <span class="icon">üíå</span>
                ‡∏™‡πà‡∏á‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à & ‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏ï‡πâ‡∏°
              </button>
              <div id="fbResult" class="status-msg"></div>
              <p class="muted">
                ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏î‡∏µ ‡πÜ ‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡πâ‡∏°‡∏Å‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö ‡∏ï‡∏≤‡∏°‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡∏ó‡∏µ‡πà HR ‡∏Å‡∏≥‡∏´‡∏ô‡∏î
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- PROFILE VIEW -->
      <section class="view" id="view-profile">
        <div class="card">
          <div class="card-header">
            <h2><span class="icon">üë§</span>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h2>
          </div>
          <div class="card-body">
            <div class="profile-box">
              <div>
                <div class="profile-row">
                  <div class="profile-label">‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</div>
                  <div class="profile-value" id="profileEmpId">-</div>
                </div>
                <div class="profile-row">
                  <div class="profile-label">‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</div>
                  <div class="profile-value" id="profileDisplayName">-</div>
                </div>
                <div class="profile-row">
                  <div class="profile-label">‡πÅ‡∏ú‡∏ô‡∏Å</div>
                  <div class="profile-value" id="profileDept">-</div>
                </div>
                <div class="profile-row">
                  <div class="profile-label">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏∞‡∏™‡∏°</div>
                  <div class="profile-value" id="profilePoints">0</div>
                </div>
              </div>
              <div>
                <p class="muted">
                  ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó (Google Sheets / App Backend)
                  <br /><br />
                  ‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏ú‡∏ô‡∏Å / ‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ó‡∏µ‡∏° HR ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏•‡∏≤‡∏á
                </p>
                <button class="btn-secondary" onclick="refreshDashboard()">
                  üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>

    </main>
  </div>

  <script>
    // -------------------------
    // CONFIG
    // -------------------------
    // TODO: ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏ß‡∏¢ URL ‡∏Ç‡∏≠‡∏á Web App (Apps Script) ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì Deploy ‡πÅ‡∏•‡πâ‡∏ß
    const BASE = "YOUR_WEB_APP_URL"; 

    // -------------------------
    // UTILITIES
    // -------------------------
    function qs(name) {
      const url = new URL(window.location.href);
      return url.searchParams.get(name);
    }

    async function apiPost(path, payload) {
      const res = await fetch(BASE + "?path=" + encodeURIComponent(path), {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload || {})
      });
      return res.json();
    }

    function switchView(viewName) {
      document.querySelectorAll(".nav-btn").forEach(btn => {
        btn.classList.toggle("active", btn.dataset.view === viewName);
      });
      document.querySelectorAll(".view").forEach(v => {
        v.classList.toggle("active", v.id === "view-" + viewName);
      });
    }

    // -------------------------
    // STATE
    // -------------------------
    let currentEmpId = null;

    function initEmployeeContext() {
      const empFromUrl = qs("emp");
      if (empFromUrl) {
        currentEmpId = empFromUrl;
      } else {
        // Fallback: ‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å (‡∏Å‡∏£‡∏ì‡∏µ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏≤‡∏Å LINE OA)
        const manual = prompt("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡πÄ‡∏ä‡πà‡∏ô U001):");
        if (manual) currentEmpId = manual.trim();
      }

      const chipText = document.getElementById("userChipText");
      if (currentEmpId) {
        chipText.textContent = "Emp: " + currentEmpId;
      } else {
        chipText.textContent = "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô";
      }

      // ‡πÄ‡∏ï‡∏¥‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏° ‡πÅ‡∏•‡∏∞‡∏ã‡πà‡∏≠‡∏ô field ‡∏ñ‡πâ‡∏≤‡∏°‡∏≤‡∏à‡∏≤‡∏Å URL
      const empCheckin = document.getElementById("empCheckin");
      const empFeedback = document.getElementById("empFeedback");
      const empBalanceDummy = null; // ‡πÉ‡∏ä‡πâ‡∏ú‡πà‡∏≤‡∏ô Dashboard/Profile ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß

      if (currentEmpId) {
        if (empCheckin) {
          empCheckin.value = currentEmpId;
        }
        if (empFeedback) {
          empFeedback.value = currentEmpId;
        }
      }

      if (empFromUrl) {
        const f1 = document.getElementById("field-emp-activity");
        const f2 = document.getElementById("field-emp-kudos");
        if (f1) f1.style.display = "none";
        if (f2) f2.style.display = "none";
      }

      // ‡∏ï‡∏¥‡∏î‡∏õ‡πâ‡∏≤‡∏¢‡πÉ‡∏ô Profile
      document.getElementById("profileEmpId").textContent = currentEmpId || "-";
    }

    // -------------------------
    // DASHBOARD
    // -------------------------
    async function refreshDashboard() {
      if (!currentEmpId) return;

      try {
        const data = await apiPost("points/balance", { EmployeeID: currentEmpId });
        if (data.ok) {
          const pts = data.balance || 0;
          document.getElementById("pointsValue").textContent = pts;
          document.getElementById("pointsCircle").textContent = pts;
          document.getElementById("profilePoints").textContent = pts;
          const nowText = new Date().toLocaleString("th-TH");
          document.getElementById("pointsUpdatedAt").textContent =
            "‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: " + nowText;
        }
      } catch (e) {
        console.log("Error refreshDashboard", e);
      }
    }

    // -------------------------
    // ACTIVITY: CHECK-IN
    // -------------------------
    async function checkinActivity() {
      const empInput = document.getElementById("empCheckin");
      const actInput = document.getElementById("activityCheckin");
      const out = document.getElementById("checkinResult");
      out.textContent = "";
      out.className = "status-msg";

      const emp = (empInput.value || "").trim();
      const act = (actInput.value || "").trim();

      if (!emp || !act) {
        out.textContent = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô";
        out.classList.add("status-error");
        return;
      }

      try {
        const data = await apiPost("checkin", {
          EmployeeID: emp,
          ActivityID: act
        });
        if (data.ok) {
          const pts = data.points || 0;
          out.textContent = `‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à üéâ ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ${pts} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏µ‡πâ`;
          out.classList.add("status-ok");
          refreshDashboard();
        } else {
          out.textContent = "‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: " + (data.error || "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á");
          out.classList.add("status-error");
        }
      } catch (e) {
        out.textContent = "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö";
        out.classList.add("status-error");
      }
    }

    // -------------------------
    // KUDOS: SEND FEEDBACK
    // -------------------------
    async function sendKudos() {
      const empInput = document.getElementById("empFeedback");
      const targetInput = document.getElementById("empTarget");
      const actInput = document.getElementById("activityFeedback");
      const catInput = document.getElementById("fbCategory");
      const starsInput = document.getElementById("fbStars");
      const msgInput = document.getElementById("fbMessage");
      const out = document.getElementById("fbResult");

      out.textContent = "";
      out.className = "status-msg";

      const emp = (empInput.value || "").trim();
      const target = (targetInput.value || "").trim();
      const act = (actInput.value || "").trim();
      const cat = catInput.value;
      const stars = Number(starsInput.value || 1);
      const msg = (msgInput.value || "").trim();

      if (!emp || !target) {
        out.textContent = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö";
        out.classList.add("status-error");
        return;
      }

      if (!msg) {
        out.textContent = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏∂‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏™‡∏±‡∏Å‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡∏Å‡∏±‡∏ô‡∏Ñ‡πà‡∏∞ üíö";
        out.classList.add("status-error");
        return;
      }

      try {
        const data = await apiPost("feedback", {
          EmployeeID: emp,
          TargetEmployeeID: target,
          ActivityID: act || "",
          Category: cat,
          Message: msg,
          Stars: stars
        });
        if (data.ok) {
          out.textContent = "‡∏™‡πà‡∏á‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß üéâ ‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏´‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ù‡πà‡∏≤‡∏¢";
          out.classList.add("status-ok");
          msgInput.value = "";
          starsInput.value = "";
          refreshDashboard();
        } else {
          out.textContent = "‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: " + (data.error || "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á");
          out.classList.add("status-error");
        }
      } catch (e) {
        out.textContent = "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö";
        out.classList.add("status-error");
      }
    }

    // -------------------------
    // INIT
    // -------------------------
    window.addEventListener("DOMContentLoaded", () => {
      // set up nav
      document.querySelectorAll(".nav-btn").forEach(btn => {
        btn.addEventListener("click", () => {
          switchView(btn.dataset.view);
        });
      });

      initEmployeeContext();
      refreshDashboard();
    });
  </script>
</body>
</html>
